{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DmitryCopyright\\\\Desktop\\\\web-lab4\\\\frontend\\\\src\\\\components\\\\MainContent\\\\GraphSection\\\\Graph\\\\Graph.jsx\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport CSSModules from 'react-css-modules';\nimport styles from './Graph.module.css';\nimport GraphSvg from './GraphSvg';\nimport Canvas from './Canvas/Canvas';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Graph = props => {\n  _s();\n  const canone = 68;\n  const pointsCanvasRef = useRef(null);\n  const currentCanvasRef = useRef(null);\n  const loadPrevPoints = (canvas, canvasCtx) => {\n    for (let entry of props.entries) {\n      canvasCtx.fillStyle = entry.result ? 'green' : 'red';\n      canvasCtx.beginPath();\n      canvasCtx.arc(entry.x / entry.r * canone + canvas.width / 2, -entry.y / entry.r * canone + canvas.height / 2, 2, 0, 2 * Math.PI);\n      canvasCtx.fill();\n    }\n  };\n  const clearCanvas = (canvas, canvasCtx) => {\n    canvasCtx.clearRect(0, 0, canvas.width, canvas.height);\n  };\n  const drawCurrent = (canvas, canvasCtx) => {\n    clearCanvas(canvas, canvasCtx);\n    const x = props.xCurrent * canone / props.rCurrent + canvas.width / 2;\n    const y = -(props.yCurrent / props.rCurrent * canone - canvas.height / 2);\n    if (x > canvas.width || x < 0 || y > canvas.height || y < 0) {\n      return;\n    }\n    canvasCtx.setLineDash([2, 2]);\n    canvasCtx.fillStyle = 'black';\n    canvasCtx.beginPath();\n    canvasCtx.moveTo(x, canvas.width / 2);\n    canvasCtx.lineTo(x, y);\n    canvasCtx.moveTo(canvas.height / 2, y);\n    canvasCtx.lineTo(x, y);\n    canvasCtx.stroke();\n    canvasCtx.arc(x, y, 2, 0, 2 * Math.PI);\n    canvasCtx.fill();\n  };\n  const handleClick = (canvasRef, event) => {\n    const canvas = canvasRef.current;\n    let canvasX = (event.nativeEvent.offsetX - canvas.width / 2) / canone * props.rCurrent;\n    let minDiff = Infinity;\n    for (let i = 0; i < props.xValues.length; i++) {\n      if (Math.abs(canvasX - props.xValues[i]) < minDiff) {\n        minDiff = Math.abs(canvasX - props.xValues[i]);\n      }\n    }\n    let canvasY = (-event.nativeEvent.offsetY + canvas.height / 2) / canone * props.rCurrent;\n    if (canvasY < props.yMin) {\n      canvasY = props.yMin;\n    } else if (canvasY > props.yMax) {\n      canvasY = props.yMax;\n    }\n    props.selectX(canvasX);\n    props.changeY(canvasY.toString().substring(0, 7));\n    props.checkEntry();\n  };\n  useEffect(() => {\n    const pointsCanvas = pointsCanvasRef.current;\n    const pointsCanvasCtx = pointsCanvas.getContext('2d');\n    clearCanvas(pointsCanvas, pointsCanvasCtx);\n    const currentCanvas = currentCanvasRef.current;\n    const currentCanvasCtx = currentCanvas.getContext('2d');\n    clearCanvas(currentCanvas, currentCanvasCtx);\n    loadPrevPoints(pointsCanvas, pointsCanvasCtx);\n    drawCurrent(currentCanvas, currentCanvasCtx);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    styleName: \"graph-container\",\n    children: [/*#__PURE__*/_jsxDEV(GraphSvg, {\n      rValue: props.rCurrent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Canvas, {\n      canvasRef: pointsCanvasRef,\n      alt: \"\\u0418\\u043D\\u0442\\u0435\\u0440\\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C \\u0433\\u0440\\u0430\\u0444\\u0438\\u043A\\u0430 (\\u043F\\u0440\\u0435\\u0434\\u044B\\u0434\\u0443\\u0449\\u0438\\u0435 \\u0442\\u043E\\u0447\\u043A\\u0438)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Canvas, {\n      canvasRef: currentCanvasRef,\n      alt: \"\\u0418\\u043D\\u0442\\u0435\\u0440\\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C \\u0433\\u0440\\u0430\\u0444\\u0438\\u043A\\u0430 (\\u0442\\u0435\\u043A\\u0443\\u0449\\u0430\\u044F \\u0442\\u043E\\u0447\\u043A\\u0430)\",\n      handleClick: handleClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n_s(Graph, \"YsQfQEUAzB7SpGwH2tjOmsclpSc=\");\n_c = Graph;\nexport default _c2 = CSSModules(Graph, styles, {\n  allowMultiple: true,\n  handleNotFoundStyleName: 'ignore'\n});\nvar _c, _c2;\n$RefreshReg$(_c, \"Graph\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useRef","useEffect","CSSModules","styles","GraphSvg","Canvas","Graph","props","canone","pointsCanvasRef","currentCanvasRef","loadPrevPoints","canvas","canvasCtx","entry","entries","fillStyle","result","beginPath","arc","x","r","width","y","height","Math","PI","fill","clearCanvas","clearRect","drawCurrent","xCurrent","rCurrent","yCurrent","setLineDash","moveTo","lineTo","stroke","handleClick","canvasRef","event","current","canvasX","nativeEvent","offsetX","minDiff","Infinity","i","xValues","length","abs","canvasY","offsetY","yMin","yMax","selectX","changeY","toString","substring","checkEntry","pointsCanvas","pointsCanvasCtx","getContext","currentCanvas","currentCanvasCtx","allowMultiple","handleNotFoundStyleName"],"sources":["C:/Users/DmitryCopyright/Desktop/web-lab4/frontend/src/components/MainContent/GraphSection/Graph/Graph.jsx"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport CSSModules from 'react-css-modules';\nimport styles from './Graph.module.css';\nimport GraphSvg from './GraphSvg';\nimport Canvas from './Canvas/Canvas';\n\nconst Graph = (props) => {\n  const canone = 68;\n\n  const pointsCanvasRef = useRef(null);\n  const currentCanvasRef = useRef(null);\n\n  const loadPrevPoints = (canvas, canvasCtx) => {\n    for (let entry of props.entries) {\n      canvasCtx.fillStyle = entry.result ? 'green' : 'red';\n      canvasCtx.beginPath();\n      canvasCtx.arc(\n        entry.x / entry.r * canone + canvas.width / 2,\n        - entry.y / entry.r * canone + canvas.height / 2,\n        2, 0, 2 * Math.PI);\n      canvasCtx.fill();\n    }\n  }\n\n  const clearCanvas = (canvas, canvasCtx) => {\n    canvasCtx.clearRect(0, 0, canvas.width, canvas.height);\n  }\n\n  const drawCurrent = (canvas, canvasCtx) => {\n    clearCanvas(canvas, canvasCtx);\n\n    const x = props.xCurrent * canone / props.rCurrent + canvas.width / 2;\n    const y = -(props.yCurrent / props.rCurrent * canone - canvas.height / 2);\n\n    if (x > canvas.width || x < 0 ||\n      y > canvas.height || y < 0) {\n      return;\n    }\n\n    canvasCtx.setLineDash([2, 2]);\n    canvasCtx.fillStyle = 'black';\n    canvasCtx.beginPath();\n    canvasCtx.moveTo(x, canvas.width / 2);\n    canvasCtx.lineTo(x, y);\n    canvasCtx.moveTo(canvas.height / 2, y);\n    canvasCtx.lineTo(x, y);\n    canvasCtx.stroke();\n    canvasCtx.arc(x, y, 2, 0, 2 * Math.PI);\n    canvasCtx.fill();\n  }\n\n  const handleClick = (canvasRef, event) => {\n    const canvas = canvasRef.current;\n\n    let canvasX = (event.nativeEvent.offsetX - canvas.width / 2) / canone * props.rCurrent;\n    let minDiff = Infinity;\n\n    for (let i = 0; i < props.xValues.length; i++) {\n      if (Math.abs(canvasX - props.xValues[i]) < minDiff) {\n        minDiff = Math.abs(canvasX - props.xValues[i]);\n      }\n    }\n\n    let canvasY = (-event.nativeEvent.offsetY + canvas.height / 2) / canone * props.rCurrent;\n\n    if (canvasY < props.yMin) {\n      canvasY = props.yMin;\n    } else if (canvasY > props.yMax) {\n      canvasY = props.yMax;\n    }\n\n    props.selectX(canvasX);\n    props.changeY(canvasY.toString().substring(0, 7));\n    props.checkEntry()\n  }\n\n  useEffect(() => {\n    const pointsCanvas = pointsCanvasRef.current;\n    const pointsCanvasCtx = pointsCanvas.getContext('2d');\n    clearCanvas(pointsCanvas, pointsCanvasCtx);\n\n    const currentCanvas = currentCanvasRef.current;\n    const currentCanvasCtx = currentCanvas.getContext('2d');\n    clearCanvas(currentCanvas, currentCanvasCtx);\n\n    loadPrevPoints(pointsCanvas, pointsCanvasCtx);\n    drawCurrent(currentCanvas, currentCanvasCtx);\n  });\n\n  return (\n    <div styleName=\"graph-container\">\n      <GraphSvg rValue={props.rCurrent} />\n      <Canvas canvasRef={pointsCanvasRef} alt=\"Интерактивная область графика (предыдущие точки)\" />\n      <Canvas canvasRef={currentCanvasRef} alt=\"Интерактивная область графика (текущая точка)\" handleClick={handleClick} />\n    </div>\n  );\n}\n\nexport default CSSModules(Graph, styles, { allowMultiple: true, handleNotFoundStyleName: 'ignore' });\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}