{"ast":null,"code":"import authAPI from 'api/authAPI';\nimport { getEntries, clearEntries } from './table';\nimport { clearCurrent } from './values';\nconst SET_LOADING = 'web-lab4/auth/SET_LOADING';\nconst SET_SERVER_ERROR_MESSAGE = 'web-lab4/auth/SET_SERVER_ERROR_MESSAGE';\nconst SET_LOGGED_USER = 'web-lab4/auth/SET_LOGGED_USER';\nconst initialState = {\n  isLoading: false,\n  loggedUser: '',\n  serverErrorMessage: ''\n};\nexport default function authReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  switch (action.type) {\n    case SET_LOADING:\n      return Object.assign({}, state, {\n        isLoading: action.value\n      });\n    case SET_SERVER_ERROR_MESSAGE:\n      return Object.assign({}, state, {\n        serverErrorMessage: action.value\n      });\n    case SET_LOGGED_USER:\n      return Object.assign({}, state, {\n        loggedUser: action.value\n      });\n    default:\n      return state;\n  }\n}\nexport function setLoading(value) {\n  return {\n    type: SET_LOADING,\n    value\n  };\n}\nexport function setServerErrorMessage(value) {\n  return {\n    type: SET_SERVER_ERROR_MESSAGE,\n    value\n  };\n}\nexport function setLoggedUser(value) {\n  return {\n    type: SET_LOGGED_USER,\n    value\n  };\n}\nexport const initializeAuth = () => dispatch => {\n  let currentUser = JSON.parse(localStorage.getItem('userWl4'));\n  if (currentUser !== null) {\n    dispatch(setLoggedUser(currentUser.username));\n    dispatch(getEntries());\n  }\n};\nexport const login = (username, password) => dispatch => {\n  dispatch(setLoading(true));\n  authAPI.login(username, password).then(response => {\n    if (response.status === 200) {\n      localStorage.setItem('userWl4', JSON.stringify(response.data));\n      dispatch(setServerErrorMessage(''));\n      dispatch(setLoggedUser(response.data.username));\n      dispatch(getEntries());\n    } else {\n      alert(`РќРµРїСЂРµРґРІРёРґРµРЅРЅС‹Р№ РѕС‚РІРµС‚ ${response.status} РѕС‚ СЃРµСЂРІРµСЂР°!`);\n    }\n    dispatch(setLoading(false));\n  }).catch(error => {\n    if (error.response.status === 400) {\n      dispatch(setServerErrorMessage(error.response.data));\n    } else {\n      alert(`РќРµРїСЂРµРґРІРёРґРµРЅРЅС‹Р№ РѕС‚РІРµС‚ ${error.response.status} РѕС‚ СЃРµСЂРІРµСЂР°!`);\n    }\n    dispatch(setLoading(false));\n  });\n};\nexport const register = (username, password) => dispatch => {\n  dispatch(setLoading(true));\n  authAPI.register(username, password).then(response => {\n    if (response.status === 200) {\n      dispatch(setServerErrorMessage(''));\n      dispatch(login(username, password));\n    } else {\n      alert(`РќРµРїСЂРµРґРІРёРґРµРЅРЅС‹Р№ РѕС‚РІРµС‚ ${response.status} РѕС‚ СЃРµСЂРІРµСЂР°!`);\n    }\n    dispatch(setLoading(false));\n  }).catch(error => {\n    if (error.response.status === 400) {\n      dispatch(setServerErrorMessage(error.response.data));\n    } else {\n      alert(`РќРµРїСЂРµРґРІРёРґРµРЅРЅС‹Р№ РѕС‚РІРµС‚ ${error.response.status} РѕС‚ СЃРµСЂРІРµСЂР°!`);\n    }\n    dispatch(setLoading(false));\n  });\n};\nexport const logout = () => dispatch => {\n  localStorage.removeItem('userWl4');\n  dispatch(setLoggedUser(''));\n  dispatch(clearCurrent());\n  dispatch(clearEntries());\n};","map":{"version":3,"names":["authAPI","getEntries","clearEntries","clearCurrent","SET_LOADING","SET_SERVER_ERROR_MESSAGE","SET_LOGGED_USER","initialState","isLoading","loggedUser","serverErrorMessage","authReducer","state","action","type","Object","assign","value","setLoading","setServerErrorMessage","setLoggedUser","initializeAuth","dispatch","currentUser","JSON","parse","localStorage","getItem","username","login","password","then","response","status","setItem","stringify","data","alert","catch","error","register","logout","removeItem"],"sources":["C:/Users/DmitryCopyright/Desktop/web-lab4/frontend/src/redux/modules/auth.js"],"sourcesContent":["import authAPI from 'api/authAPI';\nimport { getEntries, clearEntries } from './table';\nimport { clearCurrent } from './values';\n\nconst SET_LOADING = 'web-lab4/auth/SET_LOADING';\nconst SET_SERVER_ERROR_MESSAGE = 'web-lab4/auth/SET_SERVER_ERROR_MESSAGE';\nconst SET_LOGGED_USER = 'web-lab4/auth/SET_LOGGED_USER';\n\nconst initialState = {\n  isLoading: false,\n  loggedUser: '',\n  serverErrorMessage: ''\n};\n\nexport default function authReducer(state = initialState, action = {}) {\n  switch (action.type) {\n    case SET_LOADING:\n      return Object.assign(\n        {},\n        state,\n        {\n          isLoading: action.value\n        }\n      );\n    case SET_SERVER_ERROR_MESSAGE:\n      return Object.assign(\n        {},\n        state,\n        {\n          serverErrorMessage: action.value\n        }\n      );\n    case SET_LOGGED_USER:\n      return Object.assign(\n        {},\n        state,\n        {\n          loggedUser: action.value\n        }\n      );\n    default:\n      return state;\n  }\n}\n\nexport function setLoading(value) {\n  return { type: SET_LOADING, value };\n}\n\nexport function setServerErrorMessage(value) {\n  return { type: SET_SERVER_ERROR_MESSAGE, value };\n}\nexport function setLoggedUser(value) {\n  return { type: SET_LOGGED_USER, value };\n}\n\nexport const initializeAuth = () => (dispatch) => {\n  let currentUser = JSON.parse(localStorage.getItem('userWl4'));\n  if (currentUser !== null) {\n    dispatch(setLoggedUser(currentUser.username));\n    dispatch(getEntries());\n  }\n}\n\nexport const login = (username, password) => (dispatch) => {\n  dispatch(setLoading(true));\n  authAPI.login(username, password)\n    .then(response => {\n      if (response.status === 200) {\n        localStorage.setItem('userWl4', JSON.stringify(response.data));\n        dispatch(setServerErrorMessage(''));\n        dispatch(setLoggedUser(response.data.username));\n        dispatch(getEntries());\n      } else {\n        alert(`РќРµРїСЂРµРґРІРёРґРµРЅРЅС‹Р№ РѕС‚РІРµС‚ ${response.status} РѕС‚ СЃРµСЂРІРµСЂР°!`);\n      }\n      dispatch(setLoading(false));\n    })\n    .catch(error => {\n      if (error.response.status === 400) {\n        dispatch(setServerErrorMessage(error.response.data));\n      } else {\n        alert(`РќРµРїСЂРµРґРІРёРґРµРЅРЅС‹Р№ РѕС‚РІРµС‚ ${error.response.status} РѕС‚ СЃРµСЂРІРµСЂР°!`);\n      }\n      dispatch(setLoading(false));\n    });\n}\n\nexport const register = (username, password) => (dispatch) => {\n  dispatch(setLoading(true));\n  authAPI.register(username, password)\n    .then(response => {\n      if (response.status === 200) {\n        dispatch(setServerErrorMessage(''));\n        dispatch(login(username, password));\n      } else {\n        alert(`РќРµРїСЂРµРґРІРёРґРµРЅРЅС‹Р№ РѕС‚РІРµС‚ ${response.status} РѕС‚ СЃРµСЂРІРµСЂР°!`);\n      }\n      dispatch(setLoading(false));\n    })\n    .catch(error => {\n      if (error.response.status === 400) {\n        dispatch(setServerErrorMessage(error.response.data));\n      } else {\n        alert(`РќРµРїСЂРµРґРІРёРґРµРЅРЅС‹Р№ РѕС‚РІРµС‚ ${error.response.status} РѕС‚ СЃРµСЂРІРµСЂР°!`);\n      }\n      dispatch(setLoading(false));\n    });\n}\n\nexport const logout = () => (dispatch) => {\n  localStorage.removeItem('userWl4');\n  dispatch(setLoggedUser(''));\n  dispatch(clearCurrent());\n  dispatch(clearEntries());\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}